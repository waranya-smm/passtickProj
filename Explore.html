<!DOCTYPE html>
<html class="html-explore">

<head>
    <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1">

    <title>Explore</title>
    <link rel="stylesheet" type="text/css" href="dear_part/CSS/style_Explore.css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat&display=swap" rel="stylesheet">
    <style>
        .custom-file-input::-webkit-file-upload-button {
            visibility: hidden;
        }

        .custom-file-input::before {
            content: 'SCAN QR-CODE';
            display: inline-block;
            background: #84FFBB;
            border: 20px solid  #84FFBB;
            border-radius: 3px;
            padding: 40px 14px;
            outline: none;
            white-space: nowrap;
            -webkit-user-select: none;
            cursor: pointer;
            font-weight: 700;
            font-size: 10pt;
            
        }
    </style>
</head>

<body class="body-explore">

    <div id="mySidenav" class="sidenav">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <a href="#">Profile</a>
        <a href="#">Log out</a>
    </div>

    <div id="main">
        <span style="font-size:30px;cursor:pointer" onclick="openNav()">&#9776; Explore</span>
    </div>

    <div class="menu">
        <div class="total">
            <h3 class="total-save">NOW SAVE</h3>
            <h3 class="total-save" id="numSave">0</h3>
        </div>

        <script src="https://rawgit.com/sitepoint-editors/jsqrcode/master/src/qr_packed.js"></script>
        <div class="row">
            <div class="col-exp">
<!--            <div class='scan' id='scan'>
                    <input type=file accept="image/*" capture=environment onchange="openQRCamera(this);"
                        onclick="return showQRIntro();" tabindex=-1 class="custom-file-input">
                </div>

                <script>

                    function openQRCamera(node) {
                        var reader = new FileReader();
                        reader.onload = function () {
                            node.value = "";
                            qrcode.callback = function (res) {
                                if (res instanceof Error) {
                                    alert("No QR code found. Please make sure the QR code is within the camera's frame and try again.");
                                } else {
                                    node.parentNode.previousElementSibling.value = res;
                                }
                            };
                            qrcode.decode(reader.result);
                        };
                        reader.readAsDataURL(node.files[0]);
                        console.log(node.files[0]);
                    }

                    function showQRIntro() {
                        return confirm("Use your camera to take a picture of a QR code.");

                    }
                </script>
 -->

                <div class="ranking">
                    <h4>RANKING</h4>
                    <h4 id="rank">0</h4>

                </div>
            </div>

            <div class="col-exp">
                <div class="your-save">
                    <h4>Your save</h4>
                    <h2 id="save-pcs">0</h2>
                </div>
                <a href="index.html#howto" style="text-decoration:none;color:#145A32">
                    <div class="ht-use">
                        <h4>HOW TO USE</h4>
                    </div>
                </a>
            </div>
 
            <script src="https://www.gstatic.com/firebasejs/7.4.0/firebase-app.js"></script>
            <script src="https://www.gstatic.com/firebasejs/7.4.0/firebase-firestore.js"></script>

            <script src="https://www.gstatic.com/firebasejs/7.4.0/firebase-analytics.js"></script>
            <script>
                  var   firebaseConfig = {
                        apiKey: "AIzaSyDilDOj4krjyoLendzdQR3wPflZ_Pw2iqo",
                        authDomain: "passtick-2091d.firebaseapp.com",
                        databaseURL: "https://passtick-2091d.firebaseio.com",
                        projectId: "passtick-2091d",
                        storageBucket: "passtick-2091d.appspot.com",
                        messagingSenderId: "72068778853",
                        appId: "1:72068778853:web:ccb24aad52696ab6bc2f8c",
                        measurementId: "G-JKG1E5W8T6"
                };
                
                const myFirebase = firebase.initializeApp(firebaseConfig);
                let firestore = myFirebase.firestore();

                // function writeData () {
                //     firestore.collection("store").add({ 
                //         item: "Nendoroid",
                //         name: "Hatsune Miku",
                //         id: 33,
                //         available: true
                //     });
                // }
                // var YourRNK = document.getElementById();
                var numSave = document.getElementById('numSave');
                var YourSave = document.getElementById('save-pcs');
                var TotalSave = document.getElementById('numSave');
                var Rnk = document.getElementById('rank');
                var totalmoney = 0;
                
                readData();
                function readData () {
                    firestore.collection("USERS").get()
                        .then((values) => {
                            values.forEach(element => {
                                //เเอาเมลจากดิวไปเก็บไว้ไฟล์เบสนะ ปล.แพรเอง Username/Email
                                if(element.data().username == 'pair'){
                                // YourSave.innerText = element.data().money;
                                // TotalSave = element.data().piece;
                                // Rnk = element.data().rank;
                                }
                                YourSave.innerText = element.data().money;
                                Rnk.innerText = element.data().rank;
                                

                            });
                            
                            console.log("save :"+ YourSave);
                            console.log("savenow :"+ TotalSave);
                            console.log("rank :"+ Rnk);
                    })
                    firestore.collection("SUM").get()
                        .then((values) => {
                            values.forEach(element => {
                                // numSave = element.data().totalmoney;
                                TotalSave.innerText = element.data().totalmoney;    
                            });
                            
                            
                    })
                }
            </script>
            
        </div>
    </div>




    <!-- <div id="main">
        <span id="title-header" class="header-bar">&#9776;</span>Explore
    </div>

    <div id="mySidenav" class="sidenav">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <a href="#">Profile</a>
        <a href="#">Invite friend</a>
        <a href="#">FAQ</a>
        <a href="#">About Us</a>
      </div> -->
</body>
<script src="dear_part/js/script-explore.js"></script>


</html>